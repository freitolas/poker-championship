<script>
    // ... (Keep all your existing configuration and global variables)

    // === FIXED WEBHOOK TRIGGER ===
    function triggerWebhook(type, v1 = '', v2 = '') {
        const url = webhooks[type];
        if(url) {
            // This appends the data so IFTTT can see {{Value1}} and {{Value2}}
            const separator = url.includes('?') ? '&' : '?';
            const finalUrl = `${url}${separator}value1=${encodeURIComponent(v1)}&value2=${encodeURIComponent(v2)}`;
            
            console.log("Triggering Webhook:", type, "Data:", v1, v2);
            fetch(finalUrl, { mode: 'no-cors' }).catch(e => console.log("Webhook error", e));
        }
    }

    // === UPDATED ELIMINATION ===
    window.confirmElimination = function(index) {
        try {
            const p = players[index];
            const killer = document.getElementById('killerSelect').value;
            
            p.eliminated = true;
            p.eliminatedBy = killer;
            p.eliminationTime = Date.now();
            recordAction('eliminate', { name: p.name });
            
            document.body.removeChild(document.getElementById('elim-dialog'));
            
            // SEND PLAYER NAME to IFTTT
            triggerWebhook('elim', p.name); 
            
            updatePlayerTable();
            checkForWinner();
        } catch(e) {
            alert("Error: " + e.message);
        }
    }

    // === UPDATED TIMER (SEND BLINDS) ===
    window.startTimer = function() {
        if(timerRunning) return;
        timerRunning = true;
        document.getElementById('timerStartBtn').disabled = true;
        document.getElementById('timerPauseBtn').disabled = false;
        
        if(rounds[currentRound].isBreak) triggerWebhook('break');

        timer = setInterval(() => {
            if(timeLeft > 0) {
                timeLeft--;
                document.getElementById('timeRemaining').innerText = formatTime(timeLeft);
            } else {
                document.getElementById('roundAlarm').play();
                
                // SEND BLINDS to IFTTT
                const r = rounds[currentRound];
                triggerWebhook('round', r.sb, r.bb); 

                clearInterval(timer);
                timerRunning = false;
                if(currentRound < rounds.length - 1) {
                    alert("Round Ended!");
                    currentRound++;
                    if(rounds[currentRound].isBreak) triggerWebhook('break');
                    updateRoundDisplay();
                    startTimer();
                }
            }
        }, 1000);
    }
    
    // ... (Keep the rest of the file as is)
</script>